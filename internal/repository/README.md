# 📦 internal/repository

Этот модуль отвечает за доступ к данным (Data Access Layer) и включает в себя:

- GORM-модели для описания структуры таблиц
- Реализации репозиториев для PostgreSQL
- Схемы (DTO) для общения между слоями (например, handler ↔ service)

## Структура:

### 📁 models/

Содержит **GORM-модели**, которые отражают таблицы в базе данных.

Пример: `User`, `Word`, `Sentence`, `Preferences` и т.д.

> Эти модели используются для миграций, создания, чтения и обновления записей через GORM.

---

### 📁 postgres/

Содержит **реализации репозиториев**, которые взаимодействуют с базой данных PostgreSQL через GORM.

Каждый файл — это реализация методов доступа к конкретной сущности (CRUD, фильтрация, поиск и т.д.)

Пример:  
- `word_postgres.go` — доступ к таблице `words`
- `user_postgres.go` — доступ к таблице `users`

> Эти реализации можно передавать в сервисы как зависимости.

---

### 📁 schemas/

Содержит **DTO (Data Transfer Objects)** — структуры, которые определяют входные и выходные данные между слоями.

Здесь описываются схемы:
- запросов (например, `CreateUserRequest`)
- ответов (например, `UserResponse`)
- фильтров, параметров, валидаций

> Эти структуры абстрагируют бизнес-логику от слоёв HTTP и базы.

---

## 💡 Пример потока данных:

1. `handlers/word_handler.go` принимает HTTP-запрос с JSON
2. Преобразует его в `schemas.WordCreateRequest`
3. Вызывает `service.WordService.Create(...)`
4. Сервис вызывает `postgres.WordPostgres.Create(...)`, используя `models.Word`

---

## 🧭 Рекомендации

- Используй `models/` только для ORM
- В `schemas/` избегай `gorm`-тегов — только `json` и `validate`
- Реализации в `postgres/` должны соответствовать интерфейсам

## Дополнительно (от Дани):

> Стоит подключить генератор uuid в postgresql
 ```SQL
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```
